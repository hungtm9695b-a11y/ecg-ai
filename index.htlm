<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>AI H·ªó Tr·ª£ Ph√¢n T√≠ch ECG</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background: #f4f6f9;
      padding: 30px;
      font-family: Arial, sans-serif;
    }
    .card {
      border-radius: 14px;
      box-shadow: 0px 6px 16px rgba(0,0,0,0.08);
      border: none;
    }
    textarea { resize: none; }
    pre {
      background: #1e1e1e;
      color: #00ffea;
      padding: 20px;
      border-radius: 12px;
      max-height: 350px;
      overflow-y: auto;
    }
  </style>
</head>

<body>
  <div class="container" style="max-width: 900px;">
    <h2 class="text-center fw-bold mb-4">ü´Ä AI H·ªñ TR·ª¢ PH√ÇN T√çCH ƒêI·ªÜN TIM (ECG)</h2>

    <div class="card p-4">

      <p class="text-muted">
        ƒê√¢y l√† b·∫£n ch·∫°y tr·ª±c ti·∫øp tr√™n GitHub Pages.  
        B√°c c·∫ßn nh·∫≠p OpenAI API key m·ªói l·∫ßn d√πng (kh√¥ng l∆∞u tr√™n web).
      </p>

      <!-- API KEY -->
      <label class="fw-bold mt-2">üîë OpenAI API Key:</label>
      <input type="password" id="apiKey" class="form-control" placeholder="Nh·∫≠p API key c·ªßa b√°c‚Ä¶">

      <!-- ECG -->
      <label class="fw-bold mt-4">üìâ M√¥ t·∫£ ECG:</label>
      <textarea id="ecg" rows="4" class="form-control" placeholder="Nh·∫≠p m√¥ t·∫£ ƒëi·ªán tim ho·∫∑c k·∫øt lu·∫≠n ECG‚Ä¶"></textarea>

      <!-- TRI·ªÜU CH·ª®NG -->
      <label class="fw-bold mt-4">ü©∫ Tri·ªáu ch·ª©ng:</label>
      <textarea id="symptom" rows="3" class="form-control" placeholder="Nh·∫≠p tri·ªáu ch·ª©ng b·ªánh nh√¢n‚Ä¶"></textarea>

      <!-- BUTTON -->
      <button onclick="goiAI()" class="btn btn-primary w-100 mt-4" style="font-size: 18px; padding: 10px;">
        üöÄ Ph√¢n T√≠ch B·∫±ng AI
      </button>

      <h5 class="fw-bold mt-4">üìò K·∫øt qu·∫£ AI tr·∫£ v·ªÅ:</h5>
      <pre id="output">Ch∆∞a c√≥ k·∫øt qu·∫£‚Ä¶</pre>

    </div>
  </div>

  <script>
    async function goiAI() {
      const apiKey = document.getElementById("apiKey").value.trim();
      const ecg = document.getElementById("ecg").value;
      const symptom = document.getElementById("symptom").value;

      if (!apiKey) {
        alert("B√°c ph·∫£i nh·∫≠p API key.");
        return;
      }

      document.getElementById("output").innerText = "‚è≥ ƒêang g·ªçi AI‚Ä¶";

      try {
        const res = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Authorization": `Bearer ${apiKey}`,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            model: "gpt-4o-mini",
            messages: [
              { role: "system", content: "B·∫°n l√† chuy√™n gia tim m·∫°ch h·ªó tr·ª£ ph√¢n t√≠ch ECG v√† tri·ªáu ch·ª©ng." },
              { role: "user", content: `ECG: ${ecg}\nTri·ªáu ch·ª©ng: ${symptom}\nH√£y ph√¢n t√≠ch nguy c∆° thi·∫øu m√°u c∆° tim v√† ƒë∆∞a ra g·ª£i √Ω x·ª≠ tr√≠.` }
            ]
          })
        });

        const data = await res.json();
        document.getElementById("output").innerText = JSON.stringify(data, null, 2);

      } catch (err) {
        document.getElementById("output").innerText = "‚ùå L·ªói: " + err.message;
      }
    }
  </script>
</body>
</html>
